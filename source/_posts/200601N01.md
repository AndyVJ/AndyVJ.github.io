---
title: 引用类型作为值参数和引用参数
mathjax: false
date: 2020-06-01 06:41:09
tags: C#
categories: 编程爱好
---
1. 引用类型作为值类型传递，形参和实参其实是**两个指针**，只不过指向的是同意块内存。新`new`一个对象是，它们两的联系就被切断了，指向了不同的内存块。
2. 引用类型作为引用参数，此时的形参其实是实参的一个**别名**，它们两个其实是一个**指针**，新`new`一个对象是，指向的还是同一内存块，因为它们本身就是同一个指针。

**两种情况的最后指向是不一样的。**

<!--more-->


## 引用类型作为值参数 

```CSharp
using System;

namespace RefParameter
{
    class MyClass
    {
        public int test = 20;
    }
    
    class Program
    {
       static private void RefparameterTest( MyClass mc)
        {
            mc.test = 50;
            Console.WriteLine("修改值之后：{0}", mc.test);
            mc = new MyClass();
            Console.WriteLine("新创建之后：{0}", mc.test);
            
        }
        static void Main(string[] args)
        {
            MyClass mc = new MyClass();
            Console.WriteLine("原始值：{0}\n=======", mc.test);
            RefparameterTest( mc);
            Console.WriteLine("=======\n最后值：{0}", mc.test);
            Console.ReadKey();

        }

    }
}

```

输出：
```
原始值：20
=======
修改值之后：50
新创建之后：20
=======
最后值：50   // 被修改
```

## 引用类型作为引用参数

```CSharp
using System;

namespace RefParameter
{
    class MyClass
    {
        public int test = 20;
    }
    
    class Program
    {
       static private void RefparameterTest(ref MyClass mc)
        {
            mc.test = 50;
            Console.WriteLine("修改值之后：{0}", mc.test);
            mc = new MyClass();
            Console.WriteLine("新创建之后：{0}", mc.test);
            
        }
        static void Main(string[] args)
        {
            MyClass mc = new MyClass();
            Console.WriteLine("原始值：{0}\n=======", mc.test);
            RefparameterTest(ref mc);
            Console.WriteLine("=======\n最后值：{0}", mc.test);
            Console.ReadKey();

        }
    }
}
```


输出：

```
原始值：20
=======
修改值之后：50
新创建之后：20
=======
最后值：20 // 还是原来
```


<hr/>
<span style="color:gray;font-size:12px">
参考： 
 《C#图解教程》 -> P66
</span>
