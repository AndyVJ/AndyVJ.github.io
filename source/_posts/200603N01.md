---
title: C#通过委托快窗体传值
mathjax: false
date: 2020-06-03 23:32:49
tags: C#
categories: 编程爱好
---

不同窗体处于不同线程，相互之间需要通信时，需要用到`委托`。

<!--more-->

`Form1.cs`:
```C#
using System.Windows.Forms;

namespace SelfLianXiDelegate
{

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void ChangeLblText(string str)
        {
            this.lblCounter.Text = str;
        }
    }
}
```

`Form2.cs`:
```C#
using System;
using System.Windows.Forms;

namespace SelfLianXiDelegate
{
    //public delegate void AddCounter(string str);

    public partial class Form2 : Form
    {

        //public AddCounter addCounter;
        Action<string> addCounter;
        public Form2()
        {
            InitializeComponent();
            Form1 form1 = new Form1();
            addCounter = form1.ChangeLblText;
            form1.Show();
        }

        int count = 0;
        private void btnCounter_Click(object sender, EventArgs e)
        {
            count++;
            if (addCounter != null) {
                addCounter(count.ToString());
            }
        }
    }
}

```

`Program.cs`:
```C#
using System.Windows.Forms;

namespace SelfLianXiDelegate
{
    class Program
    {
        static void Main(string[] args)
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form2());
        }
    }
}
```

输出：





<!--
<hr/>
<span style="color:gray;font-size:12px">
参考： 
1.[link-01]()
2.[link-02]()
3.[link-03]()
</span>
-->